\documentclass[]{article}
\usepackage{inputenc,hyperref,a4,color,boxedminipage,Sweave}

% Definitions
\newcommand{\slan}{{\tt S}}
\newcommand{\rlan}{{\tt R}}
\newcommand{\ryacas}{{\tt Ryacas}}
\newcommand{\yacas}{{\tt yacas}}
\newcommand{\code}[1]{{\tt #1}}
\def\yac{\texttt{Yacas}}


\setlength{\parindent}{0in}
\setlength{\textwidth}{140mm}
\setlength{\oddsidemargin}{10mm}

\title{\ryacas{} -- an \rlan{} interface to the \yacas{} computer
  algebra system -- Sym version}
\author{Rob Goedman, \and
Gabor Grothendieck,  \and
Søren Højsgaard,  \and
Ayal Pinkus}


\begin{document}
\maketitle
\tableofcontents

\renewenvironment{Schunk}{\begin{center}
    \small
    \begin{boxedminipage}{0.95\textwidth}}{
    \end{boxedminipage}\end{center}}



\section{Introduction} 
\label{sec:introduction}

\ryacas{} makes the \yacas{} computer algebra system available from
within \rlan. (\yacas{} is short for ``Yet Another Computer Algebra
System''). 

This document is based on the yacas Sym interface and is similar
to another document based on the interface provided by R yacas function.

\yacas{} is developed by Ayal Pinkhuis (who is also the maintainer)
and others, and is available at
\href{yacas.sourceforge.org}{yacas.sourceforge.org} for various
platforms. There is a comprehensive documentation (300+ pages) of
\yacas{} (also available at
\href{yacas.sourceforge.org}{yacas.sourceforge.org}) and the
documentation contains many examples.  The examples given here are
largely taken from the \yacas{} documentation (especially from the
introductory chapter) but are organised differently.

A Sym object is a yacas character string that has the "Sym" class.
Using +, - and other similar R operators.
One can combine Sym objects with other Sym objects as well as to
other R objects.  Sym(x) coerces object x to a Sym object by
first coercing it to character and then changing its class to "Sym".
One can also apply sin, cos, tan, deriv, Integrate
and other provided functions to Sym objects as shown in the examples below.


\section{A sample session} 
\label{sec:samplesession}

Algebraic calculations:
\begin{Schunk}
\begin{Sinput}
> (Sym(10) + Sym(2)) * Sym(5) + Sym(7)^Sym(7)
\end{Sinput}
\begin{Soutput}
expression(823603)
\end{Soutput}
\begin{Sinput}
> Sym("10 * 2") * 5 + Sym(7)^7
\end{Sinput}
\begin{Soutput}
expression(823643)
\end{Soutput}
\begin{Sinput}
> (Sym(10) + 2) * 5 + Sym(7)^7
\end{Sinput}
\begin{Soutput}
expression(823603)
\end{Soutput}
\begin{Sinput}
> Sym("(10+2)*5 + 7^7")
\end{Sinput}
\begin{Soutput}
expression(823603)
\end{Soutput}
\begin{Sinput}
> Sym("1/14 + 5/21 * (30 - 1+1/2)")
\end{Sinput}
\begin{Soutput}
expression(149/21)
\end{Soutput}
\end{Schunk}

Numerical evaluations:
\begin{Schunk}
\begin{Sinput}
> Sym("-12/2")
\end{Sinput}
\begin{Soutput}
expression(-6)
\end{Soutput}
\begin{Sinput}
> Eval(Sym("-12/2"))
\end{Sinput}
\begin{Soutput}
[1] -6
\end{Soutput}
\end{Schunk}

Working with symbolic expressions:
\begin{Schunk}
\begin{Sinput}
> x <- Sym("x")
> Factor(x^2 - 1)
\end{Sinput}
\begin{Soutput}
expression((x + 1) * (x - 1))
\end{Soutput}
\begin{Sinput}
> exp1 <- x^2 + 2 * x^2
> exp0 <- Sym("exp0")
> exp2 <- 2 * Sym(exp0)
> exp3 <- 6 * Pi * x
> exp4 <- exp1 * (1 - sin(exp3))/exp2
> exp4
\end{Sinput}
\begin{Soutput}
expression(3 * x^2 * (1 - sin(6 * x * pi))/(2 * exp0))
\end{Soutput}
\end{Schunk}

Working with numerical expressions:
....

Combining symbolic and numerical expressions:
\begin{Schunk}
\begin{Sinput}
> N(sin(1)^2 + cos(x)^2)
\end{Sinput}
\begin{Soutput}
expression(cos(x)^2 + 0.708073418273571)
\end{Soutput}
\end{Schunk}


Differentiation:
\begin{Schunk}
\begin{Sinput}
> deriv(sin(x), x)
\end{Sinput}
\begin{Soutput}
expression(cos(x))
\end{Soutput}
\end{Schunk}

Integration: [!!! This is odd: I thought yacas was case sensitive...]]]
\begin{Schunk}
\begin{Sinput}
> Set(A, "ssss")
\end{Sinput}
\begin{Soutput}
expression(ssss)
\end{Soutput}
\begin{Sinput}
> a <- Sym("a")
> b <- Sym("b")
> Integrate(sin(x), x, a, b)
\end{Sinput}
\begin{Soutput}
In function "Check" : CommandLine(1) : "Found bound variable A which should have been unbound, in MatchLinear: ssss =ssss "
\end{Soutput}
\begin{Sinput}
> Clear("A")
\end{Sinput}
\begin{Soutput}
expression(TRUE)
\end{Soutput}
\begin{Sinput}
> Integrate(sin(x), x, a, b)
\end{Sinput}
\begin{Soutput}
expression(cos(a) - cos(b))
\end{Soutput}
\end{Schunk}

Expanding polynomials:
\begin{Schunk}
\begin{Sinput}
> Expand((1 + x)^3)
\end{Sinput}
\begin{Soutput}
expression(x^3 + 3 * x^2 + 3 * x + 1)
\end{Soutput}
\end{Schunk}

Taylor expansion:
\begin{Schunk}
\begin{Sinput}
> texp <- Taylor(exp(x), x, 0, 3)
\end{Sinput}
\end{Schunk}

Printing the result in nice forms:
\begin{Schunk}
\begin{Sinput}
> PrettyForm(texp)
\end{Sinput}
\begin{Soutput}
     2    3    
    x    x     
x + -- + -- + 1
    2    6     
\end{Soutput}
\begin{Sinput}
> TeXForm(texp)
\end{Sinput}
\begin{Soutput}
expression("$x + \frac{x ^{2}}{2}  + \frac{x ^{3}}{6}  + 1$")
\end{Soutput}
\end{Schunk}



\section{Simple \yac\ calculations}


\subsection{Setting and clearing a variable}

The function Set() command can both be used to assign
values to global variables. 
\begin{Schunk}
\begin{Sinput}
> Set(n, "(10 + 2) * 5")
\end{Sinput}
\begin{Soutput}
expression(60)
\end{Soutput}
\begin{Sinput}
> n <- Sym("n")
> Set(n, n + n)
\end{Sinput}
\begin{Soutput}
expression(120)
\end{Soutput}
\begin{Sinput}
> a <- Sym("a")
> Set(z, cos(a))
\end{Sinput}
\begin{Soutput}
expression(cos(a))
\end{Soutput}
\begin{Sinput}
> z <- Sym("z")
> z + z
\end{Sinput}
\begin{Soutput}
expression(2 * cos(a))
\end{Soutput}
\end{Schunk}


To clear a variable
binding execute Clear():
\begin{Schunk}
\begin{Sinput}
> Set(n, 1)
\end{Sinput}
\begin{Soutput}
expression(1)
\end{Soutput}
\begin{Sinput}
> n <- Sym("n")
> n
\end{Sinput}
\begin{Soutput}
expression(1)
\end{Soutput}
\begin{Sinput}
> Clear(n)
\end{Sinput}
\begin{Soutput}
expression(TRUE)
\end{Soutput}
\begin{Sinput}
> n
\end{Sinput}
\begin{Soutput}
expression(n)
\end{Soutput}
\end{Schunk}

\subsection{Symbolic and numerical evaluations, precision}

Evaluations are generally exact:
\begin{Schunk}
\begin{Sinput}
> exp(0)
\end{Sinput}
\begin{Soutput}
[1] 1
\end{Soutput}
\begin{Sinput}
> exp(1)
\end{Sinput}
\begin{Soutput}
[1] 2.718282
\end{Soutput}
\begin{Sinput}
> sin(Pi/4)
\end{Sinput}
\begin{Soutput}
expression(root(1/2, 2))
\end{Soutput}
\begin{Sinput}
> Sym("355/113")
\end{Sinput}
\begin{Soutput}
expression(355/113)
\end{Soutput}
\end{Schunk}

 To obtain a numerical evaluation
(approximation), the N() function can be used:
\begin{Schunk}
\begin{Sinput}
> N(exp(1))
\end{Sinput}
\begin{Soutput}
expression(2.71828182845905)
\end{Soutput}
\begin{Sinput}
> N(sin(Pi/4))
\end{Sinput}
\begin{Soutput}
expression(0.707134)
\end{Soutput}
\begin{Sinput}
> N(355/113)
\end{Sinput}
\begin{Soutput}
expression(3.14159292035398)
\end{Soutput}
\end{Schunk}

The N() function has an optional second argument, the required precision:
\begin{Schunk}
\begin{Sinput}
> N("355/133", 20)
\end{Sinput}
\begin{Soutput}
expression(2.66917293233083)
\end{Soutput}
\end{Schunk}

The command Precision(n)
can be used to specify that all floating point numbers should have a
fixed precision of n digits:
\begin{Schunk}
\begin{Sinput}
> Precision(5)
\end{Sinput}
\begin{Soutput}
expression(TRUE)
\end{Soutput}
\begin{Sinput}
> N("355/113")
\end{Sinput}
\begin{Soutput}
expression(3.14159)
\end{Soutput}
\end{Schunk}


\subsection{Rational numbers}

Rational numbers will stay rational as long as the numerator and
denominator are integers:
\begin{Schunk}
\begin{Sinput}
> Sym("55 / 10")
\end{Sinput}
\begin{Soutput}
expression(11/2)
\end{Soutput}
\end{Schunk}


\subsection{Symbolic calculation}
\label{sec:symbolicCalculation}

Some exact manipulations :
\begin{Schunk}
\begin{Sinput}
> Sym("1/14+5/21*(1*30-(1+1/2)*5^2)")
\end{Sinput}
\begin{Soutput}
expression(-12/7)
\end{Soutput}
\begin{Sinput}
> x <- Sym("x")
> 0 + x
\end{Sinput}
\begin{Soutput}
expression(x)
\end{Soutput}
\begin{Sinput}
> y <- Sym("y")
> x + y
\end{Sinput}
\begin{Soutput}
expression(x + y)
\end{Soutput}
\begin{Sinput}
> sin(asin(x)) + tan(atan(y))
\end{Sinput}
\begin{Soutput}
expression(x + y)
\end{Soutput}
\end{Schunk}

\subsection{Complex numbers and the imaginary unit} 

The imaginary unit $i$ is denoted I and complex numbers can be entered
as either expressions involving I or explicitly Complex(a,b) for a+ib.
\begin{Schunk}
\begin{Sinput}
> I^2
\end{Sinput}
\begin{Soutput}
expression(-1)
\end{Soutput}
\begin{Sinput}
> 7 + 3 * I
\end{Sinput}
\begin{Soutput}
expression(complex_cartesian(7, 3))
\end{Soutput}
\begin{Sinput}
> Conjugate("%")
\end{Sinput}
\begin{Soutput}
expression(complex_cartesian(7, -3))
\end{Soutput}
\begin{Sinput}
> exp(3 * I)
\end{Sinput}
\begin{Soutput}
expression(complex_cartesian(cos(3), sin(3)))
\end{Soutput}
\end{Schunk}

\subsection{Recall the most recent line -- the \texttt{\%} operator}

The operator \texttt{\%} automatically recalls the result from the
previous line. 
\begin{Schunk}
\begin{Sinput}
> (1 + x)^3
\end{Sinput}
\begin{Soutput}
expression((x + 1)^3)
\end{Soutput}
\begin{Sinput}
> z <- Sym("%")
> z
\end{Sinput}
\begin{Soutput}
expression((x + 1)^3)
\end{Soutput}
\end{Schunk}



\subsection{Printing with PrettyForm, PrettyPrint, TexForm and  TeXForm} 
\label{sec:printing}

There are different ways of displaying the output. The (standard)
yacas form is:
\begin{Schunk}
\begin{Sinput}
> a <- Sym("a")
> b <- Sym("b")
> c <- Sym("c")
> d <- Sym("d")
> A <- List(List(a, b), List(c, d))
> k <- Sym("k")
> B <- (1 + x)^2 + k^3
> A
\end{Sinput}
\begin{Soutput}
expression(list(list(a, b), list(c, d)))
\end{Soutput}
\begin{Sinput}
> B
\end{Sinput}
\begin{Soutput}
expression((x + 1)^2 + k^3)
\end{Soutput}
\end{Schunk}

The Pretty form is:
\begin{Schunk}
\begin{Sinput}
> PrettyForm(A)
\end{Sinput}
\begin{Soutput}
/              \
| ( a ) ( b )  |
|              |
| ( c ) ( d )  |
\              /
\end{Soutput}
\begin{Sinput}
> PrettyForm(B)
\end{Sinput}
\begin{Soutput}
         2    3
( x + 1 )  + k 
\end{Soutput}
\end{Schunk}

An alternative is the PrettyPrinter [!!! Why does this give the same
result as before??? Earlier I got XML output as well... Is something
not reset???]
\begin{Schunk}
\begin{Sinput}
> PrettyPrinter("PrettyForm")
\end{Sinput}
\begin{Soutput}
True
\end{Soutput}
\begin{Sinput}
> A
\end{Sinput}
\begin{Soutput}
/              \
| ( a ) ( b )  |
|              |
| ( c ) ( d )  |
\              /
\end{Soutput}
\begin{Sinput}
> PrettyPrinter()
\end{Sinput}
\begin{Soutput}
True;
\end{Soutput}
\begin{Sinput}
> A
\end{Sinput}
\begin{Soutput}
{{a,b},{c,d}};
\end{Soutput}
\begin{Sinput}
> PrettyPrinter("OMForm")
\end{Sinput}
\begin{Soutput}
expression(TRUE)
\end{Soutput}
\begin{Sinput}
> A
\end{Sinput}
\begin{Soutput}
expression(list(list(a, b), list(c, d)))
\end{Soutput}
\end{Schunk}

The output can be displayed in TeX form as well:
\begin{Schunk}
\begin{Sinput}
> TeXForm(B)
\end{Sinput}
\begin{Soutput}
expression("$left( x + 1\right)  ^{2} + k ^{3}$")
\end{Soutput}
\end{Schunk}



\section{Commands} 
\label{sec:commands}


\subsection{Factorial}

\begin{Schunk}
\begin{Sinput}
> Factorial(40)
\end{Sinput}
\begin{Soutput}
expression(Factorial(40))
\end{Soutput}
\end{Schunk}

\subsection{Taylor expansions} 

Expand exp(x) in three terms
around 0 and a:
\begin{Schunk}
\begin{Sinput}
> Taylor(exp(x), x, 0, 3)
\end{Sinput}
\begin{Soutput}
expression(x + x^2/2 + x^3/6 + 1)
\end{Soutput}
\begin{Sinput}
> a <- Sym("a")
> Taylor(exp(x), x, a, 3)
\end{Sinput}
\begin{Soutput}
expression(exp(a) + exp(a) * (x - a) + (x - a)^2 * exp(a)/2 + 
    (x - a)^3 * exp(a)/6)
\end{Soutput}
\end{Schunk}

The InverseTaylor() function builds the Taylor series expansion of the
inverse of an expression. For example, the Taylor expansion in two
terms of the inverse of exp(x) around x=0 (which is the Taylor
expansion of log(y) around y=1):
\begin{Schunk}
\begin{Sinput}
> InverseTaylor(exp(x), x, 0, 2)
\end{Sinput}
\begin{Soutput}
expression(x + x^2/2 + 1)
\end{Soutput}
\begin{Sinput}
> Taylor(log(y), y, 1, 2)
\end{Sinput}
\begin{Soutput}
expression(y - 1 - (y - 1)^2/2)
\end{Soutput}
\end{Schunk}

\subsection{Solving equations}


\subsubsection{Solving equations symbolically}

Solve equations symbolically with:
\begin{Schunk}
\begin{Sinput}
> Solve(x/(1 + x) == a, x)
\end{Sinput}
\begin{Soutput}
expression(list(x == a/(1 - a)))
\end{Soutput}
\begin{Sinput}
> Solve(x^2 + x == 0, x)
\end{Sinput}
\begin{Soutput}
expression(list(x == 0, x == -1))
\end{Soutput}
\end{Schunk}
(Note the use of the == operator, which does not evaluate to anything,
to denote an "equation" object.) Solve() is rather limited.

\subsubsection{Solving equations numerically}
To solve an equation (in one variable) like sin(x)-exp(x)=0 numerically taking 0.5
as initial guess and an accuracy of 0.0001 do:
\begin{Schunk}
\begin{Sinput}
> Newton(sin(x) - exp(x), x, 0.5, 1e-04)
\end{Sinput}
\begin{Soutput}
expression(-3.18306)
\end{Soutput}
\end{Schunk}

\subsection{expanding polynomials} 
\begin{Schunk}
\begin{Sinput}
> Expand((x + 1)^3)
\end{Sinput}
\begin{Soutput}
expression(x^3 + 3 * x^2 + 3 * x + 1)
\end{Soutput}
\end{Schunk}



\subsection{Simplifying an expression}

The function Simplify() attempts to reduce an expression
to a simpler form. 
\begin{Schunk}
\begin{Sinput}
> (x + y)^3 - (x - y)^3
\end{Sinput}
\begin{Soutput}
expression((x + y)^3 - (x - y)^3)
\end{Soutput}
\begin{Sinput}
> Simplify("%")
\end{Sinput}
\begin{Soutput}
expression(6 * (x^2 * y) + 2 * y^3)
\end{Soutput}
\end{Schunk}


\subsection{Analytical derivatives}

Analytical derivatives of functions can be evaluated:
\begin{Schunk}
\begin{Sinput}
> deriv(sin(x), x)
\end{Sinput}
\begin{Soutput}
expression(cos(x))
\end{Soutput}
\begin{Sinput}
> deriv(deriv(sin(x)))
\end{Sinput}
\begin{Soutput}
expression(-sin(x))
\end{Soutput}
\end{Schunk}

The \code{deriv} function also accepts an argument specifying how often the
derivative has to be taken, e.g:
\begin{Schunk}
\begin{Sinput}
> deriv(sin(x), x, 2)
\end{Sinput}
\begin{Soutput}
expression(-sin(x))
\end{Soutput}
\end{Schunk}

\subsection{Integration}

!!! Problem arises because A was defined above (a is not defined, though)
(Seems ok in Sym version.)
\begin{Schunk}
\begin{Sinput}
> Integrate(sin(x), x, a, b)
\end{Sinput}
\begin{Soutput}
expression(cos(a) - cos(b))
\end{Soutput}
\begin{Sinput}
> Integrate(log(x), x, a, b)
\end{Sinput}
\begin{Soutput}
expression(b * log(b) - b - (a * log(a) - a))
\end{Soutput}
\begin{Sinput}
> Integrate(1/(x^2 - 1), x)
\end{Sinput}
\begin{Soutput}
expression(log(2 * (x - 1))/2 - log(2 * (x + 1))/2)
\end{Soutput}
\begin{Sinput}
> Integrate(sin(a * x)^2 * cos(b * x), x)
\end{Sinput}
\begin{Soutput}
expression((2 * sin(b * x)/b - (sin(-2 * x * a - b * x)/(-2 * 
    a - b) + sin(-2 * x * a + b * x)/(-2 * a + b)))/4)
\end{Soutput}
\end{Schunk}


\subsection{Limits}
\begin{Schunk}
\begin{Sinput}
> Limit(sin(x)/x, x, 0)
\end{Sinput}
\begin{Soutput}
expression(1)
\end{Soutput}
\begin{Sinput}
> n <- Sym("n")
> Limit((1 + (1/n))^n, n, Infinity)
\end{Sinput}
\begin{Soutput}
expression(exp(1))
\end{Soutput}
\begin{Sinput}
> h <- Sym("h")
> Limit((sin(x + h) - sin(x))/h, h, 0)
\end{Sinput}
\begin{Soutput}
expression(cos(x))
\end{Soutput}
\end{Schunk}


\subsection{Variable substitution}

\begin{Schunk}
\begin{Sinput}
> Subst(x + x, x, cos(a))
\end{Sinput}
\begin{Soutput}
expression(2 * cos(a))
\end{Soutput}
\end{Schunk}

\subsection{Solving ordinary differential equations}

OdeSolve notation not supported by Sym currently.

\begin{Schunk}
\begin{Sinput}
> yacas("OdeSolve(y''==4*y)")
\end{Sinput}
\begin{Soutput}
expression(C435 * exp(2 * x) + C439 * exp(-2 * x))
\end{Soutput}
\begin{Sinput}
> yacas("OdeSolve(y'==8*y)")
\end{Sinput}
\begin{Soutput}
expression(C469 * exp(8 * x))
\end{Soutput}
\end{Schunk}




\section{Matrices}
\label{sec:matrices}
\begin{Schunk}
\begin{Sinput}
> u1 <- Sym("u1")
> u2 <- Sym("u2")
> E4 <- List(List(u1, u1, 0), List(u1, 0, u2), List(0, 
+     u2, 0))
> PrettyForm(E4)
\end{Sinput}
\begin{Soutput}
/                       \
| ( u1 ) ( u1 ) ( 0 )   |
|                       |
| ( u1 ) ( 0 )  ( u2 )  |
|                       |
| ( 0 )  ( u2 ) ( 0 )   |
\                       /
\end{Soutput}
\end{Schunk}



\subsection{Inverse} 

\begin{Schunk}
\begin{Sinput}
> E4i <- Inverse(E4)
> Simplify(E4i)
\end{Sinput}
\begin{Soutput}
expression(list(list(1/u1, 0, -1/u2), list(0, 0, 1/u2), list(-1/u2, 
    1/u2, u1/u2^2)))
\end{Soutput}
\begin{Sinput}
> PrettyForm(Simplify(E4i))
\end{Sinput}
\begin{Soutput}
/                        \
| / 1  \ ( 0 )  / -1 \   |
| | -- |        | -- |   |
| \ u1 /        \ u2 /   |
|                        |
| ( 0 )  ( 0 )  / 1  \   |
|               | -- |   |
|               \ u2 /   |
|                        |
| / -1 \ / 1  \ / u1  \  |
| | -- | | -- | | --- |  |
| \ u2 / \ u2 / |   2 |  |
|               \ u2  /  |
\                        /
\end{Soutput}
\end{Schunk}


\subsection{Determinant}

\begin{Schunk}
\begin{Sinput}
> determinant(E4)
\end{Sinput}
\begin{Soutput}
expression(-(u1 * u2^2))
\end{Soutput}
\begin{Sinput}
> determinant(E4i)
\end{Sinput}
\begin{Soutput}
expression(-(u1 * u2 * (u1 * u2^3))/(u1 * u2^2)^3)
\end{Soutput}
\begin{Sinput}
> Simplify(E4i)
\end{Sinput}
\begin{Soutput}
expression(list(list(1/u1, 0, -1/u2), list(0, 0, 1/u2), list(-1/u2, 
    1/u2, u1/u2^2)))
\end{Soutput}
\begin{Sinput}
> Simplify(determinant(E4i))
\end{Sinput}
\begin{Soutput}
expression(-1/(u1 * u2^2))
\end{Soutput}
\end{Schunk}


\end{document}
