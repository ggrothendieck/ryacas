\documentclass[]{article} \usepackage{inputenc,hyperref,a4,color,boxedminipage,Sweave}
%\VignetteIndexEntry{Introduction to Ryacas}
%\VignettePackage{Ryacas}
%\VignetteDepends{XML}

% Definitions
\newcommand{\slan}{{\tt S}}
\newcommand{\rlan}{{\tt R}}
\newcommand{\ryacas}{{\tt Ryacas}}
\newcommand{\yacas}{{\tt yacas}}
\newcommand{\code}[1]{{\tt #1}}
\def\yac{\texttt{Yacas}}


\setlength{\parindent}{0in}
\setlength{\textwidth}{140mm}
\setlength{\oddsidemargin}{10mm}

\title{\ryacas{} -- an \rlan{} interface to the \yacas{} computer
  algebra system}
\author{Rob Goedman, \and
Gabor Grothendieck,  \and
Søren Højsgaard,  \and
Ayal Pinkus}


\begin{document}
\maketitle
\tableofcontents

\renewenvironment{Schunk}{\begin{center}
    \small
    \begin{boxedminipage}{0.95\textwidth}}{
    \end{boxedminipage}\end{center}}



\section{Introduction} 
\label{sec:introduction}

\ryacas{} makes the \yacas{} computer algebra system available from
within \rlan. (\yacas{} is short for ``Yet Another Computer Algebra
System''). 

\yacas{} is developed by Ayal Pinkhuis (who is also the maintainer)
and others, and is available at
\href{yacas.sourceforge.org}{yacas.sourceforge.org} for various
platforms. There is a comprehensive documentation (300+ pages) of
\yacas{} (also available at
\href{yacas.sourceforge.org}{yacas.sourceforge.org}) and the
documentation contains many examples.  The examples given here are
largely taken from the \yacas{} documentation (especially from the
introductory chapter) but are organised differently.


\section{A sample session} 
\label{sec:samplesession}

Algebraic calculations:
\begin{Schunk}
\begin{Sinput}
> yacas(expression((10 + 2) * 5 + 7^7))
\end{Sinput}
\begin{Soutput}
expression(823603)
\end{Soutput}
\begin{Sinput}
> yacas(expression(1/14 + 5/21 * (30 - (1 + 1/2) * 
+     5^2)))
\end{Sinput}
\begin{Soutput}
expression(-12/7)
\end{Soutput}
\end{Schunk}

Numerical evaluations:
\begin{Schunk}
\begin{Sinput}
> yacas(expression(N(-12/2)))
\end{Sinput}
\begin{Soutput}
expression(-6)
\end{Soutput}
\end{Schunk}

Working with symbolic expressions:
\begin{Schunk}
\begin{Sinput}
> yacas(expression(Factor(x^2 - 1)))
\end{Sinput}
\begin{Soutput}
expression((x + 1) * (x - 1))
\end{Soutput}
\begin{Sinput}
> exp1 <- expression(x^2 + 2 * x^2)
> exp2 <- expression(2 * exp0)
> exp3 <- expression(6 * pi * x)
> exp4 <- expression((exp1 * (1 - sin(exp3)))/exp2)
> yacas(exp4)
\end{Sinput}
\begin{Soutput}
expression(3 * x^2 * (1 - sin(6 * x * pi))/(2 * exp0))
\end{Soutput}
\end{Schunk}

Working with numerical expressions:
....

Combining symbolic and numerical expressions:
\begin{Schunk}
\begin{Sinput}
> yacas("N(Sin(1)^2 + Cos(x)^2)")
\end{Sinput}
\begin{Soutput}
expression(cos(x)^2 + 0.70807)
\end{Soutput}
\begin{Sinput}
> yacas("N(Sin(1)^2 + Cos(x)^2)", retclass = "character")
\end{Sinput}
\begin{Soutput}
expression(cos(x)^2 + 0.70807)
\end{Soutput}
\end{Schunk}


Differentiation:
\begin{Schunk}
\begin{Sinput}
> yacas("D(x)Sin(x)")
\end{Sinput}
\begin{Soutput}
expression(cos(x))
\end{Soutput}
\end{Schunk}

Integration: [!!! This is odd: I thought yacas was case sensitive...]]]
\begin{Schunk}
\begin{Sinput}
> yacas("A")
\end{Sinput}
\begin{Soutput}
expression(A)
\end{Soutput}
\begin{Sinput}
> yacas("A:='ssss'")
\end{Sinput}
\begin{Soutput}
expression("'ssss'")
\end{Soutput}
\begin{Sinput}
> yacas("a")
\end{Sinput}
\begin{Soutput}
expression(a)
\end{Soutput}
\begin{Sinput}
> yacas("Integrate(x,a,b)Sin(x)")
\end{Sinput}
\begin{Soutput}
In function "Check" : CommandLine(1) : "Found bound variable A which should have been unbound, in MatchLinear: 'ssss' ='ssss' "
\end{Soutput}
\begin{Sinput}
> yacas("Clear(A)")
\end{Sinput}
\begin{Soutput}
expression(TRUE)
\end{Soutput}
\begin{Sinput}
> yacas("A")
\end{Sinput}
\begin{Soutput}
expression(A)
\end{Soutput}
\begin{Sinput}
> yacas("Integrate(x,a,b)Sin(x)")
\end{Sinput}
\begin{Soutput}
expression(cos(a) - cos(b))
\end{Soutput}
\end{Schunk}

Expanding polynomials:
\begin{Schunk}
\begin{Sinput}
> yacas("Expand((1+x)^3)")
\end{Sinput}
\begin{Soutput}
expression(x^3 + 3 * x^2 + 3 * x + 1)
\end{Soutput}
\end{Schunk}

Taylor expansion:
\begin{Schunk}
\begin{Sinput}
> yacas("texp := Taylor(x,0,3) Exp(x)")
\end{Sinput}
\begin{Soutput}
expression(x + x^2/2 + x^3/6 + 1)
\end{Soutput}
\end{Schunk}

Printing the result in nice forms:
\begin{Schunk}
\begin{Sinput}
> yacas("PrettyForm(texp)")
\end{Sinput}
\begin{Soutput}
     2    3    
    x    x     
x + -- + -- + 1
    2    6     
\end{Soutput}
\begin{Sinput}
> yacas("TeXForm(texp)", retclass = "unquote")
\end{Sinput}
\begin{Soutput}
expression("$x + \frac{x ^{2}}{2}  + \frac{x ^{3}}{6}  + 1$")
\end{Soutput}
\end{Schunk}



\section{Simple \yac\ calculations}


\subsection{Setting and clearing a variable}

The function Set() and the operator := can both be used to assign
values to global variables. 
\begin{Schunk}
\begin{Sinput}
> yacas("n := (10 + 2) * 5")
\end{Sinput}
\begin{Soutput}
expression(60)
\end{Soutput}
\begin{Sinput}
> yacas("n := n+n")
\end{Sinput}
\begin{Soutput}
expression(120)
\end{Soutput}
\begin{Sinput}
> yacas("Set(z, Cos(a))")
\end{Sinput}
\begin{Soutput}
expression(TRUE)
\end{Soutput}
\begin{Sinput}
> yacas("z+z")
\end{Sinput}
\begin{Soutput}
expression(2 * cos(a))
\end{Soutput}
\end{Schunk}


To clear a variable
binding execute Clear():
\begin{Schunk}
\begin{Sinput}
> yacas(expression(n))
\end{Sinput}
\begin{Soutput}
expression(120)
\end{Soutput}
\begin{Sinput}
> yacas("Clear(n)")
\end{Sinput}
\begin{Soutput}
expression(TRUE)
\end{Soutput}
\begin{Sinput}
> yacas(expression(n))
\end{Sinput}
\begin{Soutput}
expression(n)
\end{Soutput}
\end{Schunk}

\subsection{Symbolic and numerical evaluations, precision}

Evaluations are generally exact:
\begin{Schunk}
\begin{Sinput}
> yacas("Exp(0)")
\end{Sinput}
\begin{Soutput}
expression(1)
\end{Soutput}
\begin{Sinput}
> yacas("Exp(1)")
\end{Sinput}
\begin{Soutput}
expression(exp(1))
\end{Soutput}
\begin{Sinput}
> yacas("Sin(Pi/4)")
\end{Sinput}
\begin{Soutput}
expression(root(1/2, 2))
\end{Soutput}
\begin{Sinput}
> yacas("355/113")
\end{Sinput}
\begin{Soutput}
expression(355/113)
\end{Soutput}
\end{Schunk}

 To obtain a numerical evaluation
(approximation), the N() function can be used:
\begin{Schunk}
\begin{Sinput}
> yacas("N(Exp(1))")
\end{Sinput}
\begin{Soutput}
expression(2.71828)
\end{Soutput}
\begin{Sinput}
> yacas("N(Sin(Pi/4))")
\end{Sinput}
\begin{Soutput}
expression(0.707134)
\end{Soutput}
\begin{Sinput}
> yacas("N(355/113)")
\end{Sinput}
\begin{Soutput}
expression(3.14159)
\end{Soutput}
\end{Schunk}

The N() function has an optional second argument, the required precision:
\begin{Schunk}
\begin{Sinput}
> yacas("N(355/133,20)")
\end{Sinput}
\begin{Soutput}
expression(2.66917293233083)
\end{Soutput}
\end{Schunk}

The command Precision(n)
can be used to specify that all floating point numbers should have a
fixed precision of n digits:
\begin{Schunk}
\begin{Sinput}
> yacas("Precision(5)")
\end{Sinput}
\begin{Soutput}
expression(TRUE)
\end{Soutput}
\begin{Sinput}
> yacas("N(355/113)")
\end{Sinput}
\begin{Soutput}
expression(3.14159)
\end{Soutput}
\end{Schunk}


\subsection{Rational numbers}

Rational numbers will stay rational as long as the numerator and
denominator are integers:
\begin{Schunk}
\begin{Sinput}
> yacas(expression(55/10))
\end{Sinput}
\begin{Soutput}
expression(11/2)
\end{Soutput}
\end{Schunk}


\subsection{Symbolic calculation}
\label{sec:symbolicCalculation}

Some exact manipulations :
\begin{Schunk}
\begin{Sinput}
> yacas("1/14+5/21*(30-(1+1/2)*5^2)")
\end{Sinput}
\begin{Soutput}
expression(-12/7)
\end{Soutput}
\begin{Sinput}
> yacas("0+x")
\end{Sinput}
\begin{Soutput}
expression(x)
\end{Soutput}
\begin{Sinput}
> yacas("x+1*y")
\end{Sinput}
\begin{Soutput}
expression(x + y)
\end{Soutput}
\begin{Sinput}
> yacas("Sin(ArcSin(alpha))+Tan(ArcTan(beta))")
\end{Sinput}
\begin{Soutput}
expression(alpha + beta)
\end{Soutput}
\end{Schunk}

\subsection{Complex numbers and the imaginary unit} 

The imaginary unit $i$ is denoted I and complex numbers can be entered
as either expressions involving I or explicitly Complex(a,b) for a+ib.
\begin{Schunk}
\begin{Sinput}
> yacas("I^2")
\end{Sinput}
\begin{Soutput}
expression(-1)
\end{Soutput}
\begin{Sinput}
> yacas("7+3*I")
\end{Sinput}
\begin{Soutput}
expression(complex_cartesian(7, 3))
\end{Soutput}
\begin{Sinput}
> yacas("Conjugate(%)")
\end{Sinput}
\begin{Soutput}
expression(complex_cartesian(7, -3))
\end{Soutput}
\begin{Sinput}
> yacas("Exp(3*I)")
\end{Sinput}
\begin{Soutput}
expression(complex_cartesian(cos(3), sin(3)))
\end{Soutput}
\end{Schunk}

\subsection{Recall the most recent line -- the \texttt{\%} operator}

The operator \texttt{\%} automatically recalls the result from the
previous line. 
\begin{Schunk}
\begin{Sinput}
> yacas("(1+x)^3")
\end{Sinput}
\begin{Soutput}
expression((x + 1)^3)
\end{Soutput}
\begin{Sinput}
> yacas("%")
\end{Sinput}
\begin{Soutput}
expression((x + 1)^3)
\end{Soutput}
\begin{Sinput}
> yacas("z:= %")
\end{Sinput}
\begin{Soutput}
expression((x + 1)^3)
\end{Soutput}
\end{Schunk}



\subsection{Printing with PrettyForm, PrettyPrint, TexForm and  TeXForm} 
\label{sec:printing}

There are different ways of displaying the output. The (standard)
yacas form is:
\begin{Schunk}
\begin{Sinput}
> yacas("A:={{a,b},{c,d}}")
\end{Sinput}
\begin{Soutput}
expression(list(list(a, b), list(c, d)))
\end{Soutput}
\begin{Sinput}
> yacas("B:= (1+x)^2+k^3")
\end{Sinput}
\begin{Soutput}
expression((x + 1)^2 + k^3)
\end{Soutput}
\begin{Sinput}
> yacas("A")
\end{Sinput}
\begin{Soutput}
expression(list(list(a, b), list(c, d)))
\end{Soutput}
\begin{Sinput}
> yacas("B")
\end{Sinput}
\begin{Soutput}
expression((x + 1)^2 + k^3)
\end{Soutput}
\end{Schunk}

The Pretty form is:
\begin{Schunk}
\begin{Sinput}
> yacas("PrettyForm(A)")
\end{Sinput}
\begin{Soutput}
/              \
| ( a ) ( b )  |
|              |
| ( c ) ( d )  |
\              /
\end{Soutput}
\begin{Sinput}
> yacas("PrettyForm(B)")
\end{Sinput}
\begin{Soutput}
         2    3
( x + 1 )  + k 
\end{Soutput}
\end{Schunk}

An alternative is the PrettyPrinter [!!! Why does this give the same
result as before??? Earlier I got XML output as well... Is something
not reset???]
\begin{Schunk}
\begin{Sinput}
> yacas("PrettyPrinter(\"PrettyForm\")")
\end{Sinput}
\begin{Soutput}
True
\end{Soutput}
\begin{Sinput}
> yacas("A")
\end{Sinput}
\begin{Soutput}
/              \
| ( a ) ( b )  |
|              |
| ( c ) ( d )  |
\              /
\end{Soutput}
\begin{Sinput}
> yacas("PrettyPrinter()")
\end{Sinput}
\begin{Soutput}
True;
\end{Soutput}
\begin{Sinput}
> yacas("A")
\end{Sinput}
\begin{Soutput}
{{a,b},{c,d}};
\end{Soutput}
\end{Schunk}

The output can be displayed in TeX form as well:
\begin{Schunk}
\begin{Sinput}
> yacas("TeXForm(B)")
\end{Sinput}
\begin{Soutput}
"$\left( x + 1\right)  ^{2} + k ^{3}$";
\end{Soutput}
\begin{Sinput}
> yacas("TexForm(B)")
\end{Sinput}
\begin{Soutput}
$\left( x + 1\right)  ^{2} + k ^{3}$
\end{Soutput}
\end{Schunk}



\section{Commands} 
\label{sec:commands}


\subsection{Factorial}

\begin{Schunk}
\begin{Sinput}
> yacas("40!")
\end{Sinput}
\begin{Soutput}
815915283247897734345611269596115894272000000000;
\end{Soutput}
\end{Schunk}

\subsection{Taylor expansions} 

Expand Exp(x) in three terms
around 0 and a:
\begin{Schunk}
\begin{Sinput}
> yacas("Taylor(x,0,3) Exp(x)")
\end{Sinput}
\begin{Soutput}
x+x^2/2+x^3/6+1;
\end{Soutput}
\begin{Sinput}
> yacas("Taylor(x,a,3) Exp(x)")
\end{Sinput}
\begin{Soutput}
Exp(a)+Exp(a)*(x-a)+((x-a)^2*Exp(a))/2+((x-a)^3*Exp(a))/6;
\end{Soutput}
\end{Schunk}

The InverseTaylor() function builds the Taylor series expansion of the
inverse of an expression. For example, the Taylor expansion in two
terms of the inverse of Exp(x) around x=0 (which is the Taylor
expansion of Ln(y) around y=1):
\begin{Schunk}
\begin{Sinput}
> yacas("InverseTaylor(x,0,2)Exp(x)")
\end{Sinput}
\begin{Soutput}
x-1-(x-1)^2/2;
\end{Soutput}
\begin{Sinput}
> yacas("Taylor(y,1,2)Ln(y)")
\end{Sinput}
\begin{Soutput}
y-1-(y-1)^2/2;
\end{Soutput}
\end{Schunk}

\subsection{Solving equations}


\subsubsection{Solving equations symbolically}

Solve equations symbolically with:
\begin{Schunk}
\begin{Sinput}
> yacas("Solve(x/(1+x) == a, x)")
\end{Sinput}
\begin{Soutput}
{x==a/(1-a)};
\end{Soutput}
\begin{Sinput}
> yacas("Solve(x^2+x == 0, x)")
\end{Sinput}
\begin{Soutput}
{x==0,x==(-1)};
\end{Soutput}
\end{Schunk}
(Note the use of the == operator, which does not evaluate to anything,
to denote an "equation" object.) Solve() is rather limited.

\subsubsection{Solving equations numerically}
To solve an equation (in one variable) like Sin(x)-Exp(x)=0 numerically taking 0.5
as initial guess and an accuracy of 0.0001 do:
\begin{Schunk}
\begin{Sinput}
> yacas("Newton(Sin(x)-Exp(x),x, 0.5, 0.0001)")
\end{Sinput}
\begin{Soutput}
-3.18306;
\end{Soutput}
\end{Schunk}

\subsection{Expanding polynomials} 
\begin{Schunk}
\begin{Sinput}
> yacas("Expand((1+x)^3)")
\end{Sinput}
\begin{Soutput}
x^3+3*x^2+3*x+1;
\end{Soutput}
\end{Schunk}



\subsection{Simplifying an expression}

The function Simplify() attempts to reduce an expression
to a simpler form. 
\begin{Schunk}
\begin{Sinput}
> yacas("(x+y)^3-(x-y)^3")
\end{Sinput}
\begin{Soutput}
(x+y)^3-(x-y)^3;
\end{Soutput}
\begin{Sinput}
> yacas("Simplify(%)")
\end{Sinput}
\begin{Soutput}
6*x^2*y+2*y^3;
\end{Soutput}
\end{Schunk}


\subsection{Analytical derivatives}

Analytical derivatives of functions can be evaluated:
\begin{Schunk}
\begin{Sinput}
> yacas("D(x) Sin(x)")
\end{Sinput}
\begin{Soutput}
Cos(x);
\end{Soutput}
\begin{Sinput}
> yacas("D(x) D(x) Sin(x)")
\end{Sinput}
\begin{Soutput}
-Sin(x);
\end{Soutput}
\end{Schunk}

The D function also accepts an argument specifying how often the
derivative has to be taken, e.g:
\begin{Schunk}
\begin{Sinput}
> yacas("D(x,2)Sin(x)")
\end{Sinput}
\begin{Soutput}
-Sin(x);
\end{Soutput}
\end{Schunk}

\subsection{Integration}

!!! Problem arises because A was defined above (a is not defined, though)
\begin{Schunk}
\begin{Sinput}
> yacas("Integrate(x,a,b)Sin(x)")
\end{Sinput}
\begin{Soutput}
In function "Check" : CommandLine(1) : "Found bound variable A which should have been unbound, in MatchLinear: {{a,b},{c,d}} ={{a,b},{c,d}} "
\end{Soutput}
\begin{Sinput}
> yacas("Integrate(x,a,b)Ln(x)+x")
\end{Sinput}
\begin{Soutput}
In function "Check" : CommandLine(1) : "Found bound variable A which should have been unbound, in MatchLinear: {{a,b},{c,d}} ={{a,b},{c,d}} "
\end{Soutput}
\begin{Sinput}
> yacas("Integrate(x)1/(x^2-1)")
\end{Sinput}
\begin{Soutput}
In function "Check" : CommandLine(1) : "Found bound variable A which should have been unbound, in MatchLinear: {{a,b},{c,d}} ={{a,b},{c,d}} "
\end{Soutput}
\begin{Sinput}
> yacas("Integrate(x)Sin(a*x)^2*Cos(b*x)")
\end{Sinput}
\begin{Soutput}
In function "Check" : CommandLine(1) : "Found bound variable A which should have been unbound, in MatchLinear: {{a,b},{c,d}} ={{a,b},{c,d}} "
\end{Soutput}
\end{Schunk}


\subsection{Limits}
\begin{Schunk}
\begin{Sinput}
> yacas("Limit(x,0)Sin(x)/x")
\end{Sinput}
\begin{Soutput}
1;
\end{Soutput}
\begin{Sinput}
> yacas("Limit(n,Infinity)(1+(1/n))^n")
\end{Sinput}
\begin{Soutput}
Exp(1);
\end{Soutput}
\begin{Sinput}
> yacas("Limit(h,0) (Sin(x+h)-Sin(x))/h")
\end{Sinput}
\begin{Soutput}
Cos(x);
\end{Soutput}
\end{Schunk}


\subsection{Variable substitution}

\begin{Schunk}
\begin{Sinput}
> yacas("Subst(x,Cos(a))x+x")
\end{Sinput}
\begin{Soutput}
2*Cos(a);
\end{Soutput}
\end{Schunk}

\subsection{Solving ordinary differential equations}

\begin{Schunk}
\begin{Sinput}
> yacas("OdeSolve(y''==4*y)")
\end{Sinput}
\begin{Soutput}
C991*Exp(2*x)+C995*Exp((-2)*x);
\end{Soutput}
\begin{Sinput}
> yacas("OdeSolve(y'==8*y)")
\end{Sinput}
\begin{Soutput}
C1025*Exp(8*x);
\end{Soutput}
\end{Schunk}




\section{Matrices}
\label{sec:matrices}
\begin{Schunk}
\begin{Sinput}
> yacas("E4:={ {u1,u1,0},{u1,0,u2},{0,u2,0} }")
\end{Sinput}
\begin{Soutput}
{{u1,u1,0},{u1,0,u2},{0,u2,0}};
\end{Soutput}
\begin{Sinput}
> yacas("PrettyForm(E4)")
\end{Sinput}
\begin{Soutput}
/                       \
| ( u1 ) ( u1 ) ( 0 )   |
|                       |
| ( u1 ) ( 0 )  ( u2 )  |
|                       |
| ( 0 )  ( u2 ) ( 0 )   |
\                       /
\end{Soutput}
\end{Schunk}



\subsection{Inverse} 

\begin{Schunk}
\begin{Sinput}
> yacas("E4i:=Inverse(E4)")
\end{Sinput}
\begin{Soutput}
{{u2^2/(u1*u2^2),0,(-u1*u2)/(u1*u2^2)},{0,0,(u1*u2)/(u1*u2^2)},{(-u1*u2)/(u1*u2^2),(u1*u2)/(u1*u2^2),u1^2/(u1*u2^2)}};
\end{Soutput}
\begin{Sinput}
> yacas("Simplify(E4i)")
\end{Sinput}
\begin{Soutput}
{{1/u1,0,(-1)/u2},{0,0,1/u2},{(-1)/u2,1/u2,u1/u2^2}};
\end{Soutput}
\begin{Sinput}
> yacas("PrettyForm(Simplify(E4i))")
\end{Sinput}
\begin{Soutput}
/                        \
| / 1  \ ( 0 )  / -1 \   |
| | -- |        | -- |   |
| \ u1 /        \ u2 /   |
|                        |
| ( 0 )  ( 0 )  / 1  \   |
|               | -- |   |
|               \ u2 /   |
|                        |
| / -1 \ / 1  \ / u1  \  |
| | -- | | -- | | --- |  |
| \ u2 / \ u2 / |   2 |  |
|               \ u2  /  |
\                        /
\end{Soutput}
\end{Schunk}


\subsection{Determinant}

\begin{Schunk}
\begin{Sinput}
> yacas("Determinant(E4)")
\end{Sinput}
\begin{Soutput}
-u1*u2^2;
\end{Soutput}
\begin{Sinput}
> yacas("Determinant(E4i)")
\end{Sinput}
\begin{Soutput}
(-u1*u2*u1*u2^3)/(u1*u2^2)^3;
\end{Soutput}
\begin{Sinput}
> yacas("Simplify(E4i)")
\end{Sinput}
\begin{Soutput}
{{1/u1,0,(-1)/u2},{0,0,1/u2},{(-1)/u2,1/u2,u1/u2^2}};
\end{Soutput}
\begin{Sinput}
> yacas("Simplify(Determinant(E4i))")
\end{Sinput}
\begin{Soutput}
(-1)/(u1*u2^2);
\end{Soutput}
\end{Schunk}





\end{document}
